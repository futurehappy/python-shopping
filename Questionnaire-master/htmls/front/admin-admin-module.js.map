{"version":3,"sources":["webpack:///./src/app/admin/admin-routing.module.ts","webpack:///./src/app/admin/admin.component.css","webpack:///./src/app/admin/admin.component.html","webpack:///./src/app/admin/admin.component.ts","webpack:///./src/app/admin/admin.module.ts","webpack:///./src/app/admin/index/index.component.css","webpack:///./src/app/admin/index/index.component.html","webpack:///./src/app/admin/index/index.component.ts","webpack:///./src/app/admin/questionnaire-form/questionnaire-form.component.css","webpack:///./src/app/admin/questionnaire-form/questionnaire-form.component.html","webpack:///./src/app/admin/questionnaire-form/questionnaire-form.component.ts"],"names":[],"mappings":"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","file":"admin-admin-module.js","sourcesContent":["import { NgModule } from '@angular/core'\nimport { Routes, RouterModule } from '@angular/router'\nimport { AdminComponent } from './admin.component'\nimport { IndexComponent } from './index/index.component'\nimport { QuestionnaireViewComponent } from './questionnaire-form/questionnaire-form.component'\nconst adminRoutes: Routes = [\n    {\n        path: '',\n        component: AdminComponent,\n        children: [\n            {\n                path: '',\n                component: IndexComponent\n            },\n            {\n                path:'questionnaire-view',\n                component:QuestionnaireViewComponent\n            }\n        ]\n    }\n];\n\n@NgModule({\n    imports: [\n        RouterModule.forChild(adminRoutes)\n    ],\n    exports: [\n        RouterModule\n    ]\n})\nexport class AdminRoutingModule { }\n","module.exports = \".header {\\n  top: 0;\\n  left: 0;\\n  width: 100%;\\n  position: fixed;\\n  height: 50px;\\n  line-height: 50px;\\n  background-color: white;\\n  box-shadow: 0 1px 5px silver;\\n  z-index: 10000;\\n}\\n.header .right {\\n  text-align: right;\\n  float: right;\\n  width: 300px;\\n}\\n.header .right .item {\\n  margin-right: 5px;\\n  padding-left: 10px;\\n  padding-right: 10px;\\n  cursor: pointer;\\n  border-right: solid silver 1px;\\n  border-radius: 0px;\\n}\\n.header .right .item:hover {\\n  color: #3da8f5;\\n}\\n.header .right .item:last-child {\\n  border-right: none;\\n}\\n.header .right .item:active {\\n  outline: none;\\n}\\n.header .right .item:focus {\\n  outline: none;\\n}\\n.content {\\n  margin-top: 60px;\\n}\\n\"","module.exports = \"<div class=\\\"header\\\">\\n\\n    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\\n    <span (click)=\\\"back()\\\"><i class=\\\"fa fa-arrow-left\\\"></i>&nbsp;后退</span>\\n    <div class=\\\"right\\\">\\n        <!-- <span class=\\\"btn\\\">帮助</span>\\n        <span class=\\\"btn\\\">钱包</span>\\n        <span class=\\\"btn\\\">设置</span> -->\\n        <span class=\\\"item\\\" (click)=\\\"logout()\\\">退出</span>\\n    </div>\\n</div>\\n<div class=\\\"content container\\\">\\n    <router-outlet></router-outlet>\\n</div>\\n<div class=\\\"footer\\\"></div>\\n\"","import { Component } from '@angular/core';\nimport { Router } from '@angular/router'\n\nimport { Ajax } from '../utils/ajax'\n\n@Component({\n    selector: 'admin-root',\n    templateUrl: './admin.component.html',\n    styleUrls: ['./admin.component.css']\n})\nexport class AdminComponent {\n    title = 'app';\n\n    constructor(private router: Router) {\n\n    }\n    get() {\n\n    }\n    back(){\n        window.history.back()\n    }\n    logout() {\n        let that = this\n        let ajax = new Ajax()\n        ajax.success = (data) => {\n            this.router.navigateByUrl('/')\n        }\n        ajax.delete('/api/v1/session', {})\n    }\n}\n","import { BrowserModule } from '@angular/platform-browser';\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from \"@angular/common\";\nimport { FormsModule } from \"@angular/forms\";\n\nimport { AdminRoutingModule } from './admin-routing.module'\nimport { AdminComponent } from './admin.component';\nimport { IndexComponent } from './index/index.component';\nimport { QuestionnaireViewComponent } from './questionnaire-form/questionnaire-form.component';\n\n@NgModule({\n    declarations: [\n        AdminComponent,\n        IndexComponent,\n        QuestionnaireViewComponent\n    ],\n    imports: [\n        CommonModule,\n        FormsModule,\n        AdminRoutingModule\n    ],\n    providers: [],\n    bootstrap: [AdminComponent]\n})\nexport class AdminModule { }\n","module.exports = \".white-space {\\n  height: 30px;\\n}\\n.projects {\\n  position: relative;\\n}\\n.projects .utils {\\n  text-align: right;\\n}\\n.projects .utils .glyphicon {\\n  cursor: pointer;\\n}\\n.projects .utils .filters .filter {\\n  margin-right: 8px;\\n}\\n.projects .project {\\n  border: solid lightgray 1px;\\n  position: relative;\\n  margin-top: 5px;\\n  padding: 10px 15px;\\n  border-radius: 2px;\\n}\\n.projects .project:hover {\\n  box-shadow: 0 1px 2px lightgray;\\n  z-index: 1;\\n}\\n.projects .project .utils {\\n  text-align: right;\\n}\\n.projects .project .utils span {\\n  margin-right: 8px;\\n}\\n.projects .add-project {\\n  cursor: pointer;\\n}\\n.projects .add-project .new-form {\\n  margin-top: 10px;\\n}\\n.projects .add-project .new-form input {\\n  border: none;\\n  outline: none;\\n  border-bottom: solid silver 2px;\\n}\\n.projects .add-project .new-form input:focus {\\n  border-bottom: solid green 2px;\\n}\\n.projects .add-project .btns {\\n  margin-top: 10px;\\n}\\n.projects .add-project .btns div {\\n  text-align: center;\\n}\\n\"","module.exports = \"<div>\\n\\n</div>\\n<div class=\\\"projects\\\">\\n    <div class=\\\"utils\\\">\\n        <span class=\\\"filters\\\">\\n            <span *ngFor=\\\"let filter of filters\\\" class='filter btn-sm btn btn-default' [class.btn-primary]=\\\"filter.active\\\" (click)=\\\"query(filter)\\\">{{filter.name}}</span>\\n        </span>\\n        <span>总页数: {{pages}}</span>\\n        &nbsp;&nbsp;\\n        <span>\\n            每页数量\\n            <select name=\\\"\\\" [(ngModel)]=\\\"query_limit\\\" (change)=\\\"change_limit()\\\">\\n                <option value=\\\"15\\\">15</option>\\n                <option value=\\\"25\\\">25</option>\\n                <option value=\\\"35\\\">35</option>\\n            </select>\\n        </span>\\n        &nbsp;&nbsp; 第 {{query_page}} 页 &nbsp;&nbsp;\\n        <i class=\\\"glyphicon glyphicon-chevron-left\\\" title=\\\"上一页\\\" (click)=\\\"pre_page()\\\"></i>\\n        &nbsp;&nbsp;\\n        <i class=\\\"glyphicon glyphicon-chevron-right\\\" title=\\\"下一页\\\" (click)=\\\"next_page()\\\"></i>\\n    </div>\\n    <div class=\\\"project row\\\" *ngFor=\\\"let item of questionnaires;let index=index\\\">\\n        <div class=\\\"col-md-10 col-sm-10 col-xs-8\\\">\\n            {{item.customer.name}}&nbsp;&nbsp;{{item.create_date}}&nbsp;&nbsp;&nbsp;&nbsp;{{item.title}}\\n        </div>\\n        <div class=\\\"utils col-md-2 col-sm-2 col-xs-4\\\">\\n            <span class=\\\"btn btn-xs btn-default\\\" title=\\\"查看\\\" (click)=\\\"view(index)\\\">\\n                <i class=\\\"fa fa-eye\\\"></i>\\n            </span>\\n        </div>\\n    </div>\\n    <div class=\\\"project row\\\" *ngIf=\\\"questionnaires.length==0 && query_state!=0\\\">\\n        没有问卷\\n    </div>\\n</div>\\n\"","import { Component } from '@angular/core';\nimport { Router } from '@angular/router';\n\nimport { Ajax } from '../../utils/ajax'\nimport { sessionstorage } from '../../utils/storage'\n\n@Component({\n    selector: 'admin-index',\n    templateUrl: './index.component.html',\n    styleUrls: ['./index.component.css']\n})\nexport class IndexComponent {\n    filters = [\n        // {\n        //     active: true,\n        //     class: 'default',\n        //     name: '草稿',\n        //     state: 0\n        // },\n        {\n            active: true,\n            class: 'warning',\n            name: '待审核',\n            state: 1\n        },\n        // {\n        //     active: false,\n        //     class: 'danger',\n        //     name: '审核失败',\n        //     state: 2\n        // },\n        {\n            active: false,\n            class: 'success',\n            name: '审核通过',\n            state: 3\n        },\n        {\n            active: false,\n            class: 'info',\n            name: '已发布',\n            state: 4\n        },\n    ]\n    api = '/api/v1/admin_questionnaire'\n    pages = 10;\n    query_state = 1;\n    query_limit = 15\n    query_page = 1\n    questionnaires = []\n    constructor(private router: Router) {\n    }\n\n    ngOnInit() {\n        this.get()\n    }\n    query(filter) {\n        for (let item of this.filters) {\n            item.active = false\n        }\n        filter.active = true\n        this.query_page = 1\n        this.query_state = filter.state\n        this.get()\n    }\n    change_limit() {\n        this.query_page = 1\n        this.get()\n    }\n    pre_page() {\n        this.query_page -= 1\n        if (this.query_page < 1) {\n            this.query_page += 1\n            return\n        }\n        this.get()\n    }\n    next_page() {\n        this.query_page += 1\n        if (this.query_page > this.pages) {\n            this.query_page -= 1\n            return\n        }\n        this.get()\n    }\n    get() {\n        let that = this\n        let ajax = new Ajax()\n        let query_data = {\n            limit: that.query_limit,\n            state: that.query_state,\n            page: that.query_page,\n        }\n        ajax.success = data => {\n            console.log(data)\n            that.questionnaires = data.objs\n            that.pages = data.pages\n        }\n        ajax.get(that.api, query_data)\n    }\n\n\n    view(index) {\n        sessionstorage.set('questionnaire_id', this.questionnaires[index].id)\n        this.router.navigateByUrl('/admin/questionnaire-view')\n    }\n}\n","module.exports = \".white-space {\\n  height: 30px;\\n}\\n.questions .question {\\n  margin-top: 15px;\\n  position: relative;\\n}\\n.questions .question .items {\\n  padding-left: 30px;\\n}\\n.comment {\\n  margin-top: 20px;\\n}\\n.comment .title {\\n  font-size: 1.2em;\\n}\\n.comment .comment-history {\\n  margin-top: 5px;\\n  padding: 10px;\\n}\\n.comment .new-comment {\\n  margin-top: 20px;\\n}\\n.comment .new-comment textarea {\\n  width: 100%;\\n  height: 100px;\\n  padding: 10px;\\n  border-radius: 5px;\\n  resize: none;\\n}\\n.comment .new-comment textarea:focus {\\n  outline: none;\\n}\\n.comment .comment-btn {\\n  text-align: right;\\n}\\n.comment .comment-btn span {\\n  margin-right: 20px;\\n}\\n\"","module.exports = \"<div class=\\\"white-space\\\"></div>\\n<div class=\\\"col-md-12 new-form\\\">\\n    <div class=\\\"row\\\">\\n        <div class=\\\"col-md-4 col-sm-12\\\">\\n            标题:&nbsp;{{questionnaire.title}}\\n        </div>\\n        <div class=\\\"col-md-4 col-sm-12\\\">\\n            截止日期:&nbsp;{{questionnaire.deadline}}\\n        </div>\\n        <div class=\\\"col-md-4 col-sm-12\\\">\\n            数量:&nbsp;{{questionnaire.quantity}}\\n        </div>\\n    </div>\\n</div>\\n<div class=\\\"row questions\\\">\\n    <div class=\\\"col-md-12\\\">\\n        <div *ngFor=\\\"let question of questionnaire.questions;let index=index\\\">\\n            <div class=\\\"question\\\">\\n                <div class=\\\"title\\\">\\n                    {{index+1}}.&nbsp;&nbsp;\\n                    <span *ngIf=\\\"question.category==='radio'\\\">单选</span>\\n                    <span *ngIf=\\\"question.category==='select'\\\">多选</span>\\n                    &nbsp;&nbsp;{{question.title}}\\n                </div>\\n                <div class=\\\"items\\\">\\n                    <div class=\\\"item\\\" *ngFor=\\\"let item of question.items;let itemindex=index\\\">\\n                        {{itemindex+1}}.&nbsp;&nbsp;{{item.content}}\\n                    </div>\\n                </div>\\n            </div>\\n        </div>\\n    </div>\\n</div>\\n<div class=\\\"comment\\\">\\n    <div class=\\\"title\\\">审核历史</div>\\n    <div class=\\\"comment-history\\\">\\n        <div *ngFor=\\\"let comment of questionnaire.comments;let index=index\\\">\\n            {{index+1}}.&nbsp;{{comment.create_date}}\\n            <div>\\n                &nbsp;&nbsp;&nbsp;&nbsp;{{comment.comment}}\\n            </div>\\n        </div>\\n        <div *ngIf=\\\"questionnaire.comments.length===0\\\">\\n            暂无\\n        </div>\\n    </div>\\n    <div class=\\\"new-comment\\\">\\n        <textarea name=\\\"\\\" id=\\\"\\\" cols=\\\"30\\\" rows=\\\"10\\\" [(ngModel)]=\\\"new_comment\\\"></textarea>\\n    </div>\\n    <div class=\\\"comment-btn\\\">\\n        <span class=\\\"btn btn-sm btn-primary\\\" (click)=\\\"comment(true)\\\">同意</span>\\n        <span class=\\\"btn btn-sm btn-danger\\\" (click)=\\\"comment(false)\\\">不同意</span>\\n    </div>\\n</div>\"","import { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { Ajax } from '../../utils/ajax'\nimport { sessionstorage } from '../../utils/storage'\n\n@Component({\n    selector: 'admin-questionnaire-form',\n    templateUrl: './questionnaire-form.component.html',\n    styleUrls: ['./questionnaire-form.component.css']\n})\nexport class QuestionnaireViewComponent implements OnInit {\n    // 问卷接口\n    api = '/api/v1/admin_questionnaire'\n    // 问卷id\n    questionnaire_id: any\n\n    now = new Date()\n    // 问卷对象\n    questionnaire: any = {\n        title: '',\n        deadline: this.now.getFullYear() + '-' + (this.now.getMonth() + 1) + '-' + this.now.getDate(),\n        quantity: 100,\n        questions: [],\n        comments:[]\n    }\n    new_comment=\"\"\n    constructor(private router: Router) {\n        this.questionnaire_id = sessionstorage.get('questionnaire_id')\n    }\n\n    ngOnInit() {\n        this.get_questionnaire()\n    }\n    // 获取问卷信息\n    get_questionnaire() {\n        let that = this\n        let ajax = new Ajax()\n        let query_data = {\n            limit: 1,\n            start_id: parseInt(this.questionnaire_id) - 1,\n            with_detail: true\n        }\n        ajax.success = data => {\n            that.questionnaire = data.objs[0]\n        }\n        ajax.get(that.api, query_data)\n    }\n    // 提交审核\n    comment(agree){\n        if(!agree && this.new_comment===''){\n            alert('请填写批注')\n            return false\n        }\n        let that=this\n        let ajax=new Ajax()\n        ajax.success=(data)=>{\n            alert('提交成功')\n            window.history.back()\n        }\n        ajax.put('/api/v1/questionnaire_comment',{\n            questionnaire_id:that.questionnaire_id,\n            is_agree:agree,\n            comment:that.new_comment\n        })\n    }\n    \n}\n"],"sourceRoot":""}